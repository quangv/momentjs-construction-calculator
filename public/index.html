<!DOCTYPE html>
<html>
  <head>
    <title>Moment.js Construction Calculator</title>
    <style type="text/css">
    .error {
      color: red;
    }
    </style>
  </head>
  <body>
    <h1>Construction Estimator</h1>
    <div>
      <h2>Project Details</h2>
      <div>
        <label>Project Name: <input type="text" value="Pizza Palace" id="projectName" ></label>
      </div>
      <div>
        <label>Project End Date: <input type="text" id="projectEndDate" placeholder="YYYY-MM-DD" ></label>
        <span id="projectEndDateError" class="error"></span>
      </div>
      <div>
        <label>Estimated Human Hours: <input type="text" value="1000" ></label>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script>
      $(document).ready(function(){
        // Default Project-End-Date 1 month from now.
        var defaultEndDate = moment().add(1, 'months').format('YYYY-MM-DD');
        $('#projectEndDate').val(defaultEndDate);

        // Check for invalid project end date.
        $('#projectEndDate').on('input', function(){
          var projectEndDate = $('#projectEndDate').val();  // get the text value.
          projectEndDate = new Date(projectEndDate);  // convert to date object.

          if(!moment(projectEndDate).isValid()) {  // Invalid date.
            $('#projectEndDateError').text("Invalid date");
          } else {  // Valid date.
            $('#projectEndDateError').text("");
          }
        })

        // Convert to ISO 8601 format
        $('#projectEndDate').on('change', function(){
          var $projectEndDate = $(this);
          var mProjectEndDate = moment(new Date($projectEndDate.val()));
          if(mProjectEndDate.isValid()) {
            $projectEndDate.val(mProjectEndDate.format('YYYY-MM-DD'));

            // Alert user their end date has changed
            $('#projectEndDate').closest('label').animate({
              fontSize: '1.5em'
            }).animate({
              fontSize: '1em'
            })
          }
        });
      });
    </script>
  </body>
</html>